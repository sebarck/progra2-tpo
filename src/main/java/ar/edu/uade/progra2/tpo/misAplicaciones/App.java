/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package ar.edu.uade.progra2.tpo.misAplicaciones;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

import ar.edu.uade.progra2.tpo.miApi.ConjuntoTDA;
import ar.edu.uade.progra2.tpo.miApi.DiccionarioMultipleTDA;
import ar.edu.uade.progra2.tpo.misImplementaciones.DiccionarioMultiple;
import ar.edu.uade.progra2.tpo.misMetodos.Metodos;

public class App {

    private static String file = "src/main/resources/Materias.csv";
    private static DiccionarioMultipleTDA diccionario;
    private static Metodos metodos = new Metodos();

    public static void main(String[] args) throws IOException {
        inicializarDiccionario();
        cargarDiccionario();
        imprimirCantidadMaterias();
        
        metodos.porcentajeMateriasInformaticaPorCarrera(diccionario);
        metodos.porcentajeMateriasCienciasBasicasPorCarrera(diccionario);
        metodos.porcentajeMateriasCienciasSocialesPorCarrera(diccionario);
    }

 
    private static void imprimirCantidadMaterias() {
    	ConjuntoTDA conjunto = diccionario.claves();
        while(!conjunto.conjuntoVacio()) {
        	int carrera = conjunto.elegir();
        	System.out.println("La cantidad de materias para la carrera " + carrera + " es "  + metodos.cantidadMateriasPorCarrera(diccionario, carrera));
        	conjunto.sacar(carrera);
        }
	}


	private static void cargarDiccionario() throws IOException {
        BufferedReader reader = new BufferedReader(new FileReader(file));
        String line;
        reader.readLine();
        while ((line = reader.readLine()) != null) {
            String[] splitLine = line.split(";");
            int nroCarrera = Integer.valueOf(splitLine[0]);
            int codigoMateria = Integer.valueOf(splitLine[1]);
            System.out.format("Codigo carrera %d | Codigo materia %d\n", nroCarrera, codigoMateria);
            diccionario.agregar(nroCarrera, codigoMateria);
        }
        reader.close();
    }

    private static void inicializarDiccionario() {
        diccionario = new DiccionarioMultiple();
        diccionario.inicializarDiccionarioMultiple();
    }
}
